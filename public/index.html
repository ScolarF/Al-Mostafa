<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ŸÅÿ±Ÿàÿ¨ ÿßŸÑŸÖÿµÿ∑ŸÅŸâ - Farouj Al-Mustafa</title>
    <link rel="stylesheet" href="styles.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Poppins:wght@300;400;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <a href="/admin" class="admin-link" title="Admin Access">
                <i class="fas fa-ellipsis-v"></i>
            </a>
            <div class="logo-section">
                <div class="logo">
                    <div class="chicken-logo">
                        <img src="logo.png" alt="Al-Mustafa Chicken Logo"
                            style="width: 100%; height: 100%; object-fit: contain;">
                    </div>
                    <h1 class="restaurant-name">
                        <span class="arabic">ŸÅÿ±Ÿàÿ¨ ÿßŸÑŸÖÿµÿ∑ŸÅŸâ</span>
                        <span class="english">Farouj Al-Mustafa</span>
                    </h1>
                </div>
            </div>
            <div class="contact-info">
                <div class="contact-item clickable" onclick="openWhatsApp()" title="WhatsApp: 76711446">
                    <i class="fab fa-whatsapp icon"></i>
                    <span class="contact-text">76711446</span>
                </div>
                <div class="contact-item clickable" onclick="openInstagram()" title="Instagram: @almoustfa.lb">
                    <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.408 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.408-4.919-4.919-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
                    </svg>
                    <span class="contact-text">@almoustfa.lb</span>
                </div>
                <div class="contact-item clickable" onclick="openLocation()"
                    title="Location: Abbasieh Next to Karaz Fruits">
                    <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" />
                    </svg>
                    <span class="contact-text">Abbasieh</span>
                </div>
            </div>
        </header>

        <!-- Navigation Menu -->
        <nav class="category-nav">
            <div class="nav-container">
                <h3>Menu Categories</h3>
                <div class="nav-links" id="nav-links">
                    <!-- Dynamic Nav Links -->
                </div>
            </div>
        </nav>

        <!-- Menu Section -->
        <main class="menu-container" id="menu-container">
            <!-- Menu will be loaded dynamically here -->
            <div style="text-align: center; padding: 50px;">
                <i class="fas fa-spinner fa-spin" style="font-size: 2rem; color: #e67e22;"></i>
                <p>Loading Menu...</p>
            </div>
        </main>

        <script>
            // Fetch and Render Menu
            document.addEventListener('DOMContentLoaded', async () => {
                try {
                    const response = await fetch('/api/menu');
                    const categories = await response.json();

                    const menuContainer = document.getElementById('menu-container');
                    const navLinksContainer = document.getElementById('nav-links');

                    menuContainer.innerHTML = ''; // Clear loading spinner
                    navLinksContainer.innerHTML = ''; // Clear hardcoded nav

                    // Emoji Mapping
                    const emojiMap = {
                        'burgers': 'üçî',
                        'salads': 'ü•ó',
                        'grilled': 'üçó',
                        'sandwiches': 'ü•™',
                        'fries': 'üçü',
                        'drinks': 'ü•§',
                        'combos': 'üçΩÔ∏è'
                    };

                    categories.forEach(category => {
                        // 1. Create Nav Link
                        const navLink = document.createElement('a');
                        navLink.href = `#${category.slug}`;
                        navLink.className = 'nav-link';

                        // Try to find an emoji match by slug or usage, else default
                        let icon = emojiMap[category.slug.toLowerCase()] || 'üçΩÔ∏è';
                        // If the name itself contains an emoji, we might not need to prepend, but our DB names are clean "Burgers".
                        navLink.textContent = `${icon} ${category.name}`;
                        navLinksContainer.appendChild(navLink);

                        // 2. Create Section
                        const section = document.createElement('section');
                        section.id = category.slug;
                        section.className = 'menu-section';

                        // Section Title
                        const title = document.createElement('h2');
                        title.className = 'section-title';
                        title.textContent = `${icon} ${category.name}`;
                        section.appendChild(title);

                        // Menu Grid
                        const grid = document.createElement('div');
                        grid.className = 'menu-grid';

                        category.Items.forEach(item => {
                            const itemDiv = document.createElement('div');
                            itemDiv.className = `menu-item ${item.is_featured ? 'featured' : ''}`;

                            // Item Content
                            const nameDiv = document.createElement('div');
                            nameDiv.className = 'item-name';

                            const nameEn = document.createElement('span');
                            nameEn.className = 'english';
                            nameEn.textContent = item.name_en;

                            const nameAr = document.createElement('span');
                            nameAr.className = 'arabic';
                            nameAr.textContent = item.name_ar;

                            nameDiv.appendChild(nameEn);
                            nameDiv.appendChild(nameAr);

                            const priceDiv = document.createElement('div');
                            priceDiv.className = 'price';
                            priceDiv.textContent = item.price;

                            itemDiv.appendChild(nameDiv);
                            itemDiv.appendChild(priceDiv);
                            grid.appendChild(itemDiv);
                        });

                        section.appendChild(grid);
                        menuContainer.appendChild(section);
                    });
                } catch (error) {
                    console.error('Error loading menu:', error);
                    document.getElementById('menu-container').innerHTML = '<p style="text-align:center; color:red;">Error loading menu. Please try again later.</p>';
                }
            });
        </script>

        <!-- Back to Top Button -->
        <button id="backToTop" class="back-to-top" title="Back to Top">
            <span>‚Üë</span>
        </button>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2024 ŸÅÿ±Ÿàÿ¨ ÿßŸÑŸÖÿµÿ∑ŸÅŸâ - Al-Mustafa Chicken. All rights reserved.</p>
        </footer>
    </div>

    <script>
        // Back to top functionality
        const backToTopButton = document.getElementById('backToTop');

        // Show/hide button based on scroll position
        window.addEventListener('scroll', function () {
            if (window.pageYOffset > 300) {
                backToTopButton.style.display = 'block';
            } else {
                backToTopButton.style.display = 'none';
            }
        });

        // Smooth scroll to top when clicked
        backToTopButton.addEventListener('click', function () {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // WhatsApp functionality
        function openWhatsApp() {
            const phoneNumber = '76711446';
            const message = 'Hello! I would like to place an order from Al-Mustafa Chicken restaurant.';
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // Instagram functionality
        function openInstagram() {
            const instagramHandle = 'almoustfa.lb';
            const instagramUrl = `https://www.instagram.com/${instagramHandle}/`;
            window.open(instagramUrl, '_blank');
        }

        // Location functionality
        function openLocation() {
            const address = 'Abbasieh Next to Karaz Fruits';
            const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(address)}`;
            window.open(googleMapsUrl, '_blank');
        }
    </script>
</body>

</html>